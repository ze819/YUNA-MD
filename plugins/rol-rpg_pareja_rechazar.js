import fetch from 'node-fetch'  
import { areJidsSameUser } from '@adiwajshing/baileys'
let handler = async (m, { conn, text, participants, groupMetadata }) => {
let fkontak = { "key": { "participants":"0@s.whatsapp.net", "remoteJid": "status@broadcast", "fromMe": false, "id": "Halo" }, "message": { "contactMessage": { "vcard": `BEGIN:VCARD\nVERSION:3.0\nN:Sy;Bot;;;\nFN:y\nitem1.TEL;waid=${m.sender.split('@')[0]}:${m.sender.split('@')[0]}\nitem1.X-ABLabel:Ponsel\nEND:VCARD` }}, "participant": "0@s.whatsapp.net" }
let grupos = [nna, nn, nnn, nnnt]
let gata = [img5, img6, img7, img8, img9]
let enlace = { contextInfo: { externalAdReply: {title: wm + ' â¤ï¸', body: 'support group' , sourceUrl: grupos.getRandom(), thumbnail: await(await fetch(gata.getRandom())).buffer() }}}
let enlace2 = { contextInfo: { externalAdReply: { showAdAttribution: true, mediaUrl: yt, mediaType: 'VIDEO', description: '', title: wm, body: 'ğ—¦ğ˜‚ğ—½ğ—²ğ—¿ YUNABOT- ğ—ªğ—µğ—®ğ˜ğ˜€ğ—”ğ—½ğ—½ ', thumbnailUrl: await(await fetch(global.img)).buffer(), sourceUrl: yt }}}
let dos = [enlace, enlace2]

let who = m.mentionedJid && m.mentionedJid[0] ? m.mentionedJid[0] : m.fromMe ? conn.user.jid : m.sender
let mentionedJid = [who]
var number = text.split`@`[1]

if(!text && !m.quoted) return await conn.sendButton(m.chat, `${mg}ÙˆØ¶Ø¹ Ø¹Ù„Ø§Ù…Ø© Ø¹Ù„Ù‰ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø´Ø®Øµ Ø§Ù„Ø°ÙŠ ØªØ±ÙŠØ¯ Ø±ÙØ¶Ù‡ ÙƒØ´Ø±ÙŠÙƒ Ø£Ùˆ Ø§Ù„Ø±Ø¯ Ø¹Ù„ÙŠÙ‡Ø§\n`, wm, null, [
['ğ—  ğ—˜ ğ—¡ ğ—¨ â˜˜ï¸', '/menu']], fkontak, m)
	
try {
if(text) {
var user = number + '@s.whatsapp.net'
} else if(m.quoted.sender) {
var user = conn.getName(m.quoted.sender)
} else if(m.mentionedJid) {
var user = number + '@s.whatsapp.net'
}  
} catch (e) {
} finally {
	
let users = m.isGroup ? participants.find(v => areJidsSameUser(v.jid == user)) : {}
let yo = conn.getName(m.sender)
let tu = conn.getName(who)

if(!users) return await conn.sendButton(m.chat, `${fg}\nÙ„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø®Øµ ØŒ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©`, wm, null, [
['ğ—  ğ—˜ ğ—¡ ğ—¨ â˜˜ï¸', '/menu']], fkontak, m)
	
if(user === m.sender) return await conn.sendButton(m.chat, `${fg}\nØ£Ù†Øª Ù†ÙØ³Ùƒ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø£Ù† ØªÙƒÙˆÙ† Ø´Ø±ÙŠÙƒØ§ `, wm, null, [
['ğ—  ğ—˜ ğ—¡ ğ—¨ â˜˜ï¸', '/menu']], fkontak, m)
	
if(user === conn.user.jid) return await conn.sendButton(m.chat, `${fg}Ø­Ø¨ÙŠØ¨ÙŠ\n\nÙ…Ø¹ÙŠ Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø£Ù† Ù†ÙƒÙˆÙ† Ø²ÙˆØ¬Ø§Ù† `, wm, null, [
['ğ—  ğ—˜ ğ—¡ ğ—¨ â˜˜ï¸', '/menu']], fkontak, m)
    
if(global.db.data.users[user].pasangan != m.sender){ 
return await conn.sendButton(m.chat, `Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø±ÙØ¶  *${tu}* Ø¥Ø°Ø§ Ù„Ù… ÙŠØµØ±Ø­ Ø£Ø­Ø¯ Ø¨Ø°Ù„Ùƒ ØŒ ÙØ£Ø¹Ù„Ù† Ø¹Ù† Ù†ÙØ³Ùƒ Ø­ØªÙ‰ ÙŠÙ‚ÙˆÙ„ÙˆØ§ Ø¥Ø°Ø§ Ù‚Ø¨Ù„ÙˆÙƒ Ø£Ùˆ Ø±ÙØ¶ÙˆÙƒ\n\nÙ„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø±ÙØ¶ Ø¥Ø°Ø§ Ù„Ù… ÙŠØ¹Ù„Ù† Ø£Ø­Ø¯ ØŒ Ø£Ø¹Ù„Ù† Ù…Ø¹ *${tu}* Ù„ØªÙ‚ÙˆÙ„ Ù…Ø§ Ø¥Ø°Ø§ ÙƒÙ†Øª ØªÙ‚Ø¨Ù„Ùƒ Ø£Ùˆ ØªØ±ÙØ¶Ùƒ`, wm, null, [
['ğ—  ğ—˜ ğ—¡ ğ—¨ â˜˜ï¸', '/menu']], fkontak, m, { contextInfo: { mentionedJid: [user, tu] }})	
	
}else{
global.db.data.users[user].pasangan = ""
return await conn.sendButton(m.chat, ` Ø§Ù„Ø§Ø³Ù *${yo}* Ù„Ù‚Ø¯ Ù‚Ø§Ù…(Ø©) Ø¨Ø±ÙØ¶ Ø§Ù„Ø³ÙŠØ¯(Ø©)  ğŸ’”*${tu}*\nÙ„Ø§ ØªØ­Ø²Ù† ØŒ Ù„Ø§ ÙŠØ²Ø§Ù„ Ù„Ø¯ÙŠÙƒ Ø§Ù„ÙƒØ«ÙŠØ± Ù„ØªÙØ¹Ù„Ù‡  ØªØ¹ÙŠØ´ Ùˆ ØªÙ„Ø§Ù‚ÙŠ Ø§Ù„Ø£Ø­Ø³Ù† ğŸƒ\n\n Ù„Ø§ ØªÙ‡ØªÙ… Ù„ Ø£Ù…Ø«Ø§Ù„Ù‡(Ø§) Ø§Ù„Ø¹Ø§Ù„Ù… ÙƒØ¨ÙŠØ± Ùˆ ÙŠÙˆØ¬Ø¯ Ø§ÙØ¶Ù„ Ø¨ÙƒØ«ÙŠØ± `, `*${tu} ğŸ’” ${yo}*\n` + wm, img5, [
['ğ—  ğ—˜ ğ—¡ ğ—¨ â˜˜ï¸', '/menu']], m, dos.getRandom(), { contextInfo: { mentionedJid: [user, tu, yo]}})	
}}}

handler.command = /^(Ø§Ø±ÙØ¶|Ø±ÙØ¶|Ø£Ø±ÙØ¶)$/i
handler.group = true
export default handler
